---
title: プロトコル概要
summary: ATプロトコルの紹介
---

# プロトコル概要

**認証済み転送プロトコル**、通称**atproto**は、大規模な分散型ソーシャルアプリケーション向けの連邦プロトコルです。この文書では、ATプロトコルの背後にあるアイディアを紹介します。

## アイデンティティ

ATプロトコルでは、ユーザーはドメイン名によって識別されます。これらのドメインは、ユーザーアカウントとそのデータをセキュリティで保護するための暗号化されたURLにマップされます。

![Identities](https://atproto.com/img/identities.jpg)

## データリポジトリ

ユーザーデータは、[署名付きデータリポジトリ](/guides/data-repos)で交換されます。これらのリポジトリは、投稿、コメント、いいね、フォロー、メディアブロブなどを含むレコードのコレクションです。

![Data repos](https://atproto.com/img/data-repos.jpg)

## 連邦

ATプロトコルは、連邦ネットワークモデルでリポジトリを同期させます。連邦は、ネットワークが利便性を持ち、信頼性があり利用可能であることを確認するために選ばれました。リポジトリデータは、標準のWebテクノロジー（[HTTP](/specs/xrpc)および[WebSockets](/specs/event-stream)）を介してサーバー間で同期されます。

ネットワークの三つの中核サービスは、パーソナルデータサーバー（PDS）、リレー、およびアプリビューです。また、フィードジェネレーターとラベラーにも取り組んでいます。

リポジトリ、レキシコン、およびDIDsなど、異なる組み合わせでスタック可能な低レベルのプリミティブがあります。私たちは、連邦アーキテクチャに関する技術的な意思決定の概要を[ブログで公開](https://blueskyweb.xyz/blog/5-5-2023-federation-architecture)しています。

## 相互運用性

[Lexicon](/specs/lexicon)と呼ばれるグローバルスキーマネットワークは、サーバー間での呼び出しの名前と振る舞いを統一するために使用されます。サーバーは「レキシコン」を実装して機能セットをサポートし、[ATP Lexicon](/lexicons/com-atproto)（ユーザーリポジトリの同期）および[Bsky Lexicon](/lexicons/app-bsky)（基本的なソーシャル機能の提供）を含みます。

![Interop](https://atproto.com/img/interop.jpg)

Webが文書を交換するのに対して、ATプロトコルは模式的および意味的な情報を交換し、異なる組織のソフトウェアが互いのデータを理解できるようにします。これにより、atprotoクライアントはサーバーとは独立してユーザーインターフェースを生成でき、コンテンツを閲覧する際には描画コード（HTML/JS/CSS）を交換する必要がありません。

## スケールの達成

パーソナルデータサーバーはクラウド上のユーザーの拠点です。データをホストし、配信し、アイデンティティを管理し、他のサービスへのリクエストを編成してビューを提供します。

リレーは、大規模なメトリクス（いいね、リポスト、フォロワーなど）の取得、コンテンツの検索（アルゴリズム）、およびユーザー検索など、すべてのイベントを処理します。

![PDS and Relay](https://atproto.com/img/small-big-world.jpg)

この区別は、スケールと高度なユーザーの選択肢を実現するためです。

## アルゴリズムの選択

Web検索エンジンと同様に、ユーザーは自分の集約サービスを選択する自由があります。フィード、アプリビュー、および検索インデックスは、ユーザーの構成に基づいてPDSによってルーティングされ、独立したサードパーティによって提供されることがあります。

![Algorithmic choice](https://atproto.com/img/algorithmic-choice.jpg)

## アカウントの移植性

パーソナルデータサーバーはいつでも失敗する可能性があると仮定します。ATプロトコルの目標は、ユーザーがサーバーの関与なしにアカウントを新しいPDSに移行できるようにすることです。

ユーザーデータは[署名付きデータリポジトリ](/guides/data-repos)に保存され、[DIDs](/guides/identity)によって検証されます。署名付きデータリポジトリは、Gitリポジトリのようなものですが、データベースレコード用であり、DIDsはユーザー証明書のレジストリで、TLS証明書システムにいくつかの点で類似しています。これらは安全で信頼性があり、ユーザーのPDSに独立しています。

![DID Documents](https://atproto.com/img/did-doc.jpg)

各DIDドキュメントは、2つの公開鍵を公開します：署名鍵と回復鍵。

* **署名鍵**：DIDドキュメントとユーザーデータリポジトリへの変更を主張します。
* **回復鍵**：DIDドキュメントへの変更を主張し、72時間のウィンドウ内で署名鍵をオーバーライドすることができます。

署名鍵はPDSに委託され、ユーザーは回復鍵を紙の鍵などとして保存します。これにより、ユーザーは元のホストの助けなしにアカウントを新しいPDSに更新できます。

![Account recovery](https://atproto.com/img/recovery.jpg)

ユーザーのデータのバックアップは、バックアップとしてクライアントに永続的に同期されます（ディスクスペースの利用可能性に依存）。PDSが通知なしに消失した場合、ユーザーはDIDドキュメントを更新し、バックアップをアップロードして新しいプロバイダーに移行できるはずです。

## スピーチ、リーチ、およびモデレーション

Atprotoのモデルは、**スピーチ**と**リーチ**は互いに連動するが、異なる層であるべきだというものです。**スピーチ**の層は寛容で、権限を分散し、全員が発言できるように設計されています。対照的に、**リーチ**の層は柔軟性を持ち、スケーラブルに設計されています。

![Speech vs Reach](https://atproto.com/img/speech-vs-reach.jpg)

atprotoの基本層（パーソナルデータリポジトリと連邦ネットワーキング）は、Webと同様に、誰でもウェブサイトを公開できる共通のスペースを作り出します。そして、インデックスサービスはネットワークからコンテンツをまとめ上げ、検索エンジンに類似してリーチを可能にします。

## 仕様

ATプロトコルの初期バージョンを構成する主要な仕様の一部は以下の通りです：

- [認証済み転送プロトコル](/specs/atp)
- [DIDs](/specs/did)および[Handles](/specs/handle)
- [リポジトリ](/specs/repository)および[データモデル](/specs/data-model)
- [Lexicon](/specs/lexicon)
- [HTTP API（XRPC）](/specs/xrpc)および[イベントストリーム](/specs/event-stream)

これらの仕様は、3つの依存レイヤーに整理できます：

![Spec diagram](https://atproto.com/img/spec-diagram.jpg)

ここから、[ガイドと仕様](/docs)を続けて読むことができます。

## ネットワークに参加する

BlueskyはATプロトコル上に構築されたオープンソーシャルネットワークであり、開発者が助けるエコシステムから外れることはありません。atprotoを利用して、サードパーティがカスタムフィード、連邦サービス、クライアントなどを介してファーストパーティと同じようにシームレスになることができます。

**atprotoで開発を行いたい開発者の方は、Blueskyの招待コードをメールでお送りします。** GitHub（または同様のプロフィール）を[このフォーム](https://forms.gle/BF21oxVNZiDjDhXF9)から共有してください。
